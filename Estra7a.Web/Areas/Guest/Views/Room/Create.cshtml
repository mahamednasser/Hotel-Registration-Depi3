@model AddRoomViewModel
@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer
@{
    ViewBag.Title = "Add Room";
}
<style>

    .btn-create {
        /* Reduced padding from 15px to 12px for smaller vertical and horizontal space */
        background-color: #2563eb;
        color: #f4f7fd;
        padding: 12px 20px; /* Adjusted padding: 12px top/bottom, 20px left/right */
        font-weight: bold;
        text-transform: uppercase;
        border-radius: 5px;
        /* Reduced width from 50% to 40% */
        width: 40%;
        transition: 0.3s;
        border-color: #2563eb;
    }

        .btn-create:hover {
            background-color: #1d4ed8;
            border-radius: 5px;
            color: #f4f7fd;
        }

</style>
<form asp-action="Create" asp-controller="Room" method="post" enctype="multipart/form-data">

    <div class="container my-5">
        <div class="row g-5">

            <div class="col-lg-7 bg-white p-4 h-100 border rounded-3">

                <h4 class="mb-3">@Localizer["Room Information"]</h4>

                <div class="mb-3">
                    <label asp-for="Name" class="form-label"></label>
                    <input asp-for="Name" class="form-control" required />
                    <span asp-validation-for="Name" class="text-danger d-block"></span>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label asp-for="PricePerNight" class="form-label"></label>
                        <div class="input-group mb-3">

                            <span class="input-group-text" id="le-addon">@Localizer["LE"]</span>

                            <input asp-for="PricePerNight"
                                   type="number"
                                   class="form-control"
                                   required
                                   placeholder="Enter Price"
                                   aria-describedby="le-addon" />

                        </div>
                        <span asp-validation-for="PricePerNight" class="text-danger d-block"></span>
                    </div>
                    <div class="col-md-6">
                        <label asp-for="Area" class="form-label"></label>
                        <div class="input-group">
                            <input asp-for="Area"
                                   type="number"
                                   class="form-control"
                                   required
                                   placeholder="Enter Area"
                                   aria-describedby="area-addon" />

                            <span class="input-group-text" id="area-addon">@Localizer["m²"]</span>
                        </div>
                        <span asp-validation-for="Area" class="text-danger d-block"></span>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label asp-for="Capacity" class="form-label"></label>
                        @* <input asp-for="Capacity" type="number" class="form-control" required /> *@
                        <select asp-for="Capacity" class="form-select" required>
                            <option value="0">@Localizer["Select Room Capacity"]</option>
                            <option value="1">1 @Localizer["Guest"]</option>
                            <option value="2">2 @Localizer["Guests"]</option>
                            <option value="5">3 @Localizer["Guests"]</option>
                            <option value="4">4 @Localizer["Guests"]</option>
                            <option value="5">5+ @Localizer["Guests"]</option>
                        </select>
                        <span asp-validation-for="Capacity" class="text-danger d-block"></span>
                    </div>
                    <div class="col-md-6">
                        <label asp-for="NumberOfRooms" class="form-label"></label>
                        <input asp-for="NumberOfRooms" type="select" class="form-control" required />
                        <span asp-validation-for="NumberOfRooms" class="text-danger d-block"></span>
                    </div>
                </div>

                <div class="mb-3">
                    <label asp-for="RoomtypeId" class="form-label">@Localizer["Room Type"]</label>
                    <div class="d-flex gap-2">
                        <select asp-for="RoomtypeId" asp-items="Model.RoomTypes" class="form-select" id="room-type" required>
                            <option value="">@Localizer["Select Room Type"]</option>
                        </select>

                        <button type="button" class="btn btn-outline-primary w-25" data-bs-toggle="modal" data-bs-target="#addTypeModal">
                            <i class="bi bi-plus-lg"></i>@Localizer["Add Type"]
                        </button>
                    </div>
                    <span asp-validation-for="RoomtypeId" class="text-danger"></span>
                </div>

                <div class="mb-4">
                    <label class="form-label">Room Features</label>
                    <select asp-for="RoomFeaturesIds"
                            asp-items="Model.RoomFeatures"
                            class="form-select"
                            id="select-room-features"
                            multiple
                            aria-label="Select Room Features"
                            data-multi-select> </select>

                    <div class="form-text text-muted">
                        <i class="bi bi-info-circle me-1"></i> @Localizer["Hold"] <strong>Ctrl</strong> @Localizer["(Windows) or "]  <strong>Command</strong> @Localizer["(Mac) to select multiple features."]
                    </div>
                    <span class="text-danger"></span>
                </div>

                <div class="mb-4">
                    <label asp-for="Description" class="form-label"></label>
                    <textarea asp-for="Description" class="form-control" rows="4" placeholder="@Localizer["details"]"></textarea>
                    <span asp-validation-for="Description" class="text-danger"></span>
                </div>

                <div class="mb-4 border-top pt-3">
                    <h4 class="mb-3">@Localizer["Upload Images"]</h4>

                    <div class="mb-3">
                        <label asp-for="BaseImage" class="form-label">@Localizer["Base Image (Cover)"]</label>
                        <input asp-for="BaseImage" type="file" class="form-control" accept="image/*" id="baseImageInput" required />
                        <span asp-validation-for="BaseImage" class="text-danger d-block"></span>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">@Localizer["Additional Images"]</label>
                        <input asp-for="RoomImages" type="file" class="form-control" accept="image/*" multiple id="additionalImagesInput" />
                        <small class="text-muted"><i class="bi bi-info-circle"></i> @Localizer["Hold multiple"]</small>
                        <span asp-validation-for="RoomImages" class="text-danger d-block"></span>
                    </div>
                </div>

                <div class="d-flex justify-content-center gap-2 border-top pt-3">
                    <button type="submit" class="btn-create">
                        <i class="bi bi-file-plus"></i>
                        @Localizer["Create Room"]
                    </button>
                </div>
            </div>



            <div class="col-lg-5">
                <div class="bg-white p-4 border rounded-3" style="border-color:#ecedf0; border-width:2px; min-height: 300px;">
                    <h4 class="mb-3">Preview</h4>

                    <div id="coverImagePreview" class="cover-image-preview mb-3 border rounded-3 overflow-hidden d-flex align-items-center justify-content-center text-muted"
                         style="height: 180px; background-color: #f8f9fa;">
                        <img id="baseImageDisplay" src="" class="img-fluid w-100 h-100 object-fit-cover previewable" style="display: none; cursor: pointer;">
                        <div id="coverPlaceholder" class="text-center">
                            <i class="bi bi-image display-6 mb-1"></i>
                            <p class="mb-0 small">Cover image preview</p>
                        </div>
                    </div>

                    <div class="row row-cols-3 g-2 mb-4" id="additionalImagesStaticWrapper">

                        <div class="col">
                            <div id="slot1Placeholder" class="additional-image-slot border rounded-3 d-flex align-items-center justify-content-center text-muted" style="height: 90px; background-color: #f8f9fa;">
                                <img id="slot1ImageDisplay" src="" class="img-fluid w-100 h-100 object-fit-cover previewable" style="display: none; cursor: pointer;">
                                <i id="slot1Icon" class="bi bi-plus-lg display-6"></i>
                            </div>
                        </div>

                        <div class="col">
                            <div id="slot2Placeholder" class="additional-image-slot border rounded-3 d-flex align-items-center justify-content-center text-muted" style="height: 90px; background-color: #f8f9fa;">
                                <img id="slot2ImageDisplay" src="" class="img-fluid w-100 h-100 object-fit-cover previewable" style="display: none; cursor: pointer;">
                                <i id="slot2Icon" class="bi bi-plus-lg display-6"></i>
                            </div>
                        </div>

                        <div class="col">
                            <div id="slot3Placeholder" class="additional-image-slot border rounded-3 d-flex align-items-center justify-content-center text-muted" style="height: 90px; background-color: #f8f9fa;">
                                <img id="slot3ImageDisplay" src="" class="img-fluid w-100 h-100 object-fit-cover previewable" style="display: none; cursor: pointer;">
                                <i id="slot3Icon" class="bi bi-plus-lg display-6"></i>
                            </div>
                        </div>

                        <div id="dynamicAdditionalImages" class="d-flex flex-wrap gap-2 mt-2 w-100" style="display: none;"></div>

                    </div>

                </div>
            </div>

        </div>

    </div>

</form>

<partial name="_AddRoomTypeModal" model="new AddRoomTypeViewModel()" />
<div class="modal fade" id="imagePreviewModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content bg-dark border-0">
            <div class="modal-body text-center p-0">
                <img id="previewImage" src="" class="img-fluid rounded">
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://codeshack.io/web/demos/MultiSelect.js"></script>
    <script src="~/js/image-preview.js"></script>
    <script src="~/js/add-type-ajax.js"></script>
}
